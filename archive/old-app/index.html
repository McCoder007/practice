<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>SpeakNow - ESL Practice</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <button id="quizBackBtn" class="header-back-btn"><i class="fa-solid fa-arrow-left"></i></button>
                <div class="brand">
                    <h1><i class="fa-solid fa-comment-dots"></i> SpeakNow</h1>
                </div>
            </div>
            <div id="progressBarContainer" class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">1/10</span>
            </div>
        </header>
        
        <!-- Main Menu Container -->
        <div id="mainMenuContainer" class="main-menu-container">
            <h2>Choose Practice Type</h2>
            <div class="practice-type-buttons">
                <button id="prepositionsBtn" class="practice-type-btn prepositions" type="button">
                    <div class="btn-content">
                        <span class="practice-type">Prepositions</span>
                        <span class="practice-description">Practice using prepositions in sentences</span>
                    </div>
                    <i class="fa-solid fa-chevron-right btn-icon"></i>
                </button>
                <button id="verbTensesBtn" class="practice-type-btn verb-tenses" type="button">
                    <div class="btn-content">
                        <span class="practice-type">Verb Tenses</span>
                        <span class="practice-description">Practice using correct verb tenses</span>
                    </div>
                    <i class="fa-solid fa-chevron-right btn-icon"></i>
                </button>
                <button id="irregularVerbsBtn" class="practice-type-btn irregular-verbs" type="button">
                    <div class="btn-content">
                        <span class="practice-type">Irregular Verbs Quiz</span>
                        <span class="practice-description">Practice common irregular verbs</span>
                    </div>
                    <i class="fa-solid fa-chevron-right btn-icon"></i>
                </button>
                <button id="vocabularyBtn" class="practice-type-btn vocabulary" type="button">
                    <div class="btn-content">
                        <span class="practice-type">Vocabulary</span>
                        <span class="practice-description">Learn vocabulary words with example sentences</span>
                    </div>
                    <i class="fa-solid fa-chevron-right btn-icon"></i>
                </button>
            </div>
        </div>
        
        <!-- Level Selection Container -->
        <div id="levelSelectionContainer" class="level-selection-container">
            <h2>Choose Preposition Level</h2>
            <div class="level-buttons">
                <button id="level1Btn" class="level-btn" type="button">Level 1<span class="stage-description">Basic prepositions in simple sentences.</span></button>
                <button id="level2Btn" class="level-btn" type="button">Level 2<span class="stage-description">More complex prepositions in longer sentences.</span></button>
            </div>
        </div>
        
        <!-- Irregular Verb Stages Container -->
        <div id="irregularVerbStagesContainer" class="irregular-verb-stages-container">
            <h2>Choose Quiz Stage</h2>
            <div class="stage-buttons">
                <button class="stage-btn" id="irregularVerbStage1Btn">Quiz Stage 1: Core Verbs<span class="stage-description">Very important verbs you need every day.</span></button>
                <button class="stage-btn" id="irregularVerbStage2Btn">Quiz Stage 2: Everyday Verbs<span class="stage-description">Verbs you hear and use often.</span></button>
                <button class="stage-btn" id="irregularVerbStage3Btn">Quiz Stage 3: Action Verbs<span class="stage-description">Verbs for moving, doing, and playing.</span></button>
                <button class="stage-btn" id="irregularVerbStage4Btn">Quiz Stage 4: Less Common Verbs<span class="stage-description">Verbs you use sometimes but should know.</span></button>
                <button class="stage-btn" id="irregularVerbStage5Btn">Quiz Stage 5: Master Level Verbs<span class="stage-description">Special verbs to sound like a native speaker.</span></button>
            </div>
        </div>

        <!-- Irregular Verb Lists Container -->
        <div id="irregularVerbListsContainer" class="irregular-verb-lists-container">
            <h2>Irregular Verb Lists</h2>
            <div class="stage-buttons">
                <button class="stage-btn" id="irregularVerbListsStage1Btn">Stage 1: Core Verbs<span class="stage-description">Very important verbs you need every day.</span></button>
                <button class="stage-btn" id="irregularVerbListsStage2Btn">Stage 2: Everyday Verbs<span class="stage-description">Verbs you hear and use often.</span></button>
                <button class="stage-btn" id="irregularVerbListsStage3Btn">Stage 3: Action Verbs<span class="stage-description">Verbs for moving, doing, and playing.</span></button>
                <button class="stage-btn" id="irregularVerbListsStage4Btn">Stage 4: Less Common Verbs<span class="stage-description">Verbs you use sometimes but should know.</span></button>
                <button class="stage-btn" id="irregularVerbListsStage5Btn">Stage 5: Master Level Verbs<span class="stage-description">Special verbs to sound like a native speaker.</span></button>
            </div>
        </div>

        <!-- Verb List Display Container -->
        <div id="verbListContainer" class="verb-list-container">
            <h2 id="verbListTitle">Irregular Verbs - Stage 1</h2>
            <div id="verbListContent" class="verb-list-content">
                <!-- Verb list will be populated here -->
            </div>
        </div>

        <div id="questionContainer" class="conversation-container">
            <div class="dialogue">
                <p class="dialogue-line">
                    <button class="play-btn" id="playLineA" title="Listen to this sentence"><i class="fa-solid fa-volume-high"></i></button>
                    <span id="lineA" class="sentence"></span>
                </p>
                <p class="dialogue-line">
                    <button class="play-btn" id="playLineB" title="Listen to this sentence"><i class="fa-solid fa-volume-high"></i></button>
                    <span id="lineB" class="sentence"></span>
                </p>
            </div>
            
            <div class="options-container" id="optionsContainer">
                <!-- Options will be inserted here -->
            </div>
            
            <div class="action-container">
                <button id="nextBtn" class="next-btn">Next <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>
        
        <div id="completionContainer" class="completion-container">
            <div class="completion-content">
                <div class="completion-icon">
                    <i class="fa-solid fa-trophy"></i>
                </div>
                <h2>Practice Complete!</h2>
                <p class="score-display">Your score: <span id="finalScore">0</span></p>
                <div class="action-container">
                    <button id="restartBtn" class="restart-btn">Start Over</button>
                    <button id="backToMainMenuBtn" class="restart-btn secondary">Back to Main Menu</button>
                </div>
            </div>
        </div>
        
        <!-- Vocabulary Practice Container -->
        <div id="vocabularyContainer" class="vocabulary-container">
            <div class="day-navigation">
                <button id="prevDayBtn" class="nav-arrow left"><i class="fa-solid fa-chevron-left"></i></button>
                <div id="currentDayDisplay" class="current-day">Day 1</div>
                <button id="nextDayBtn" class="nav-arrow right"><i class="fa-solid fa-chevron-right"></i></button>
            </div>
            
            <div class="days-carousel">
                <div id="daysSlider" class="days-slider">
                    <!-- Day panels will be added here dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Modal for Confirmation -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Exit Practice?</h3>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to exit this practice session? Your progress will not be saved.</p>
            </div>
            <div class="modal-footer">
                <button id="cancelExitBtn" class="modal-btn secondary">Continue Practice</button>
                <button id="confirmExitBtn" class="modal-btn">Exit Practice</button>
            </div>
        </div>
    </div>

    <script src="level1Data.js"></script>
    <script src="level2Data.js"></script>
    <script src="verbTensesData.js"></script>
    <script src="vocabularyData.js"></script>
    <script src="irregularVerbStage1.js"></script>
    <script src="irregularVerbStage2.js"></script>
    <script src="irregularVerbStage3.js"></script>
    <script src="irregularVerbStage4.js"></script>
    <script src="irregularVerbStage5.js"></script>
    <script src="irregularVerbListsData.js"></script>
    <script src="js/irregularVerbSentencesData.js"></script>
    <script>
        // Test script to verify data is available
        console.log("VERIFYING DATA AVAILABILITY:");
        console.log("irregularVerbStage1 available:", !!window.irregularVerbStage1);
        console.log("irregularVerbStage1 length:", window.irregularVerbStage1 ? window.irregularVerbStage1.length : "N/A");
        console.log("irregularVerbStage2 available:", !!window.irregularVerbStage2);
        console.log("irregularVerbStage3 available:", !!window.irregularVerbStage3);
        console.log("irregularVerbStage4 available:", !!window.irregularVerbStage4);
        console.log("irregularVerbStage5 available:", !!window.irregularVerbStage5);
    </script>
    <script src="index.js"></script>
    <script src="data.js"></script>
    <script src="google-tts.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="check-analytics.js"></script>
    
    <script>
        // Initialize with API key and voice settings
        document.addEventListener('DOMContentLoaded', function() {
            // API key from config.js (placeholder replaced at build time when deploying root app)
            googleTTS.setApiKey(appConfig.googleTtsApiKey);
            
            // Set to male Neural2 voice from config
            googleTTS.setVoice(appConfig.defaultVoice);
            
            // Initialize audio on first user interaction for iOS
            document.body.addEventListener('touchstart', function() {
                // Try to initialize audio context
                if (googleTTS.audioContext && googleTTS.audioContext.state === 'suspended') {
                    googleTTS.audioContext.resume();
                }
            }, {once: true});
        });
    </script>
</body>
</html>